<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--Bootstrap 4-->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
		<!--Fonts-->
		<link href="https://fonts.googleapis.com/css?family=Unica+One&amp;subset=latin-ext" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
		<!--CSS/JS-->
		<link rel="stylesheet" href="css/style.css">
		<script src="js/scripts.js"></script>
		<!--Page Title-->
		<title>Pink Ribbon Event</title>

		<script>
			var subTotal;

			function donationSelection () {

			var selection = document.getElementsByName("selection");
			var amount;
			var intAmount;
			
			if(selection[0].checked) {
			amount = '10';
			intAmount = 10;
		} else if (selection[1].checked){
			amount = '15';
			intAmount = 15;
		} else if (selection[2].checked){
			amount = '20';
			intAmount = 20;
		} else {
			amount = document.getElementById("other").value;
			intAmount = parseInt(amount);
		}
		console.log(amount);
		subTotal = intAmount + 15;
		console.log(subTotal);
		var total = subTotal.toString();
		total = total + ".00";
		amount = amount + ".00";
		document.getElementById("amount-total").innerHTML = amount;
		document.getElementById("total-cost").innerHTML = total;

		return subTotal;
		
	}
	</script>
	</head>

	<body style="overflow-x: hidden;">

		<!--Logo-->
		<div class="jumbotron jumbotron-fluid">
			<div class="container">
				<img src="Img/BCA.png" class="img-fluid" alt="celebrate pink logo" />
			</div><!--Ends Container-->
		</div><!--Ends Jumbotron-->

		<!--Donation Selection-->
		<div class="container-fluid" id="donation">

			<!--Donation Title-->
			<div class="row">
				<div class="col-sm-12">
					<h1 id="title">Donate</h1>
				</div><!--Ends Column-->
			</div><!--Ends Row-->

			<!--Progress Bar-->
			<div class="row">
				<div class="col-md-6 offset-md-3">
					<div class="steps-form-2">
					    <div class="steps-row-2 setup-panel-2 d-flex justify-content-between">
					        <div class="steps-step-2">
					            <a href="#step-1" type="button" class="btn btn-amber btn-circle-2 waves-effect ml-0 active" data-toggle="tooltip" data-placement="top" title="Registration Information"><i class="fas fa-pencil-alt"></i></a>
					        </div>
					        <div class="steps-step-2">
					            <a href="#step-2" type="button" class="btn btn-blue-grey btn-circle-2 waves-effect" data-toggle="tooltip" data-placement="top" title="Donation Amount"><i class="fas fa-dollar-sign"></i></a>
					        </div>
					        <div class="steps-step-2">
					            <a href="#step-3" type="button" class="btn btn-blue-grey btn-circle-2 waves-effect" data-toggle="tooltip" data-placement="top" title="Total"><i class="fas fa-shopping-cart"></i></a>
					        </div>
					    </div>
					</div><!--Ends Steps-->
				</div><!--Ends Column-->
			</div><!--Ends Row-->

			<!--Selections-->
			<form role="form" action="" method="post">

				<!--1st Step-->
			    <div class="row setup-content-2" id="step-1">
			        <div class="col-md-6 offset-md-3">
			            <h3 class="font-weight-bold pl-0 my-4"><strong>Registration Information</strong></h3>
			            <div class="form-group md-form">
			                <input id="First_Name" type="email" required="required" class="form-control validate" placeholder="First Name (required)">
			            </div>
			            <div class="form-group md-form">
			                <input id="Last_Name" type="text" required="required" class="form-control validate" placeholder="Last Name (required)">
			            </div>
			            <div class="form-group md-form">
			            	<input id="Email_Address" type="email" required="required" class="form-control validate" placeholder="Email (required)"> 
			            </div>
			            <!--How many guest-->
			            <div class="form-group md-form mt-3">
			            	<select class="form-control" id="guest-sel">
			            		<option>How many guest will be attending with you?</option>
			            		<option>1</option>
			            		<option>2</option>
			            		<option>3</option>
			            		<option>4</option>
			            		<option>5</option>
			            		<option>6</option>
			            		<option>7</option>
			            		<option>8</option>
			            		<option>9</option>
			            		<option>10</option>
			            	</select>
			            </div>

			            <!--Guest Name-->
			            <div class="form-group md-form mt-3">
			            	<input class="form-control validate" rows="1" id="guest_names" required="required" placeholder="List guest names seperated by a (;)">
			            </div>

			            <!--Survivor Question-->
			            <div class="form-group md-form mt-3" id="buttons">
			            	<p>Are you or your guest a cancer survivor?</p>
			            	<div class="form-check-inline">
				            	<label class="form-check-label">
				                	<input id="yourPassword-2" type="button" class="btn btn-lg btn-select" value="yes">
				                </label>
				            </div><!--Ends Checkbox-->
				            <div class="form-check-inline">
				            	<label class="form-check-label">
				                	<input id="yourPassword-2" type="button" class="btn btn-lg btn-select" value="no">
				                </label>
				            </div><!--Ends Checkbox-->
			            </div>
			            <button class="btn btn-mdb-color btn-rounded nextBtn-2 float-right btn-select" id="btn-blk" type="button">Next</button>
			        </div>
			    </div>

			    <!-- Second Step -->
			    <div class="row setup-content-2" id="step-2">
			        <div class="col-md-6 offset-md-3">
			        	<h3 class="font-weight-bold pl-0 my-4"><strong>Donation Amount</strong></h3>
			        		<div class="row" id="don-sel">
			        			<div class="col-sm-3">
					            	<div class="form-group md-form donate">
					                	<label>
					                		<input id="10-d" type="checkbox" class="form-control validate" name="selection" onchange="cbSelect(this)" /><span>$10</span>
					                	</label>
					            	</div>
					            </div>
					            <div class="col-sm-3">
					            	<div class="form-group md-form donate">
					                	<label>
					                		<input id="15-d" type="checkbox" class="form-control validate" name="selection" onchange="cbSelect(this)" /><span>$15</span>
					                	</label>
					            	</div>
					            </div>
					            <div class="col-sm-3">
					            	<div class="form-group md-form donate">
					                	<label>
					                		<input id="20-d" type="checkbox" class="form-control validate" name="selection" onchange="cbSelect(this)" /><span>$20</span>
					                	</label>
					            	</div>
					            </div>
					            <div class="col-sm-3">
					            	<div class="form-group md-form input-group donate">
					            		<label>
					            			<input id="other-sel" type="checkbox" name="selection" onchange="cbSelect(this)" /><span id="other-sel-2">Other</span>
					            		</label>
					            		<input id="other" type="text" class="form-control validate" name="other-value">
					            	</div>
					            </div>
					            <script>
					            	function cbSelect(obj) {
  										var cbs = document.getElementsByName("selection");
  										for (var i = 0; i < cbs.length; i++) {
    									cbs[i].checked = false;
  										}
  										obj.checked = true;
									}
					            </script>
					        </div>
		            		<button class="btn btn-mdb-color btn-rounded prevBtn-2 float-left btn-select" id="btn-side" type="button">Previous</button>
		            		<button class="btn btn-mdb-color btn-rounded nextBtn-2 float-right btn-select" id="btn-side" type="button" onclick="donationSelection()">Next</button>
			            </div>
			        </div>
			    </div>

			    <!-- Third Step -->
			    <div class="row setup-content-2" id="step-3" onload="totalAmount()">
			        <div class="col-md-6 offset-md-3" style="padding: 0px 30px;">
			        	<h3 class="font-weight-bold pl-0 my-4"><strong>Checkout</strong></h3>
			            <table class="table table-striped" id="top-table">
    						<thead>
      							<tr>
        							<th id="left">Item Description</th>
        							<th id="right">Amount</th>
      							</tr>
    						</thead>
    						<tbody>
      							<tr>
        							<td id="left">Donation</td>
        							<td id="right"><span id="amount-total"></span></td>
        						</tr>
        						<tr>
        							<td id="left">Brunch Registration Fee</td>
        							<td id="right">15.00</td>
        						</tr>
    						</tbody>
  						</table>
  						<table class="table table-striped">
  							<thead>
  								<tr>
  									<th id="left">Total:</th>
  									<th id="right"><span id="total-cost"></span></th>
  								</tr>
  							</thead>
  						</table>

  						<script src="https://checkout.stripe.com/checkout.js"></script>
			            <button class="btn btn-mdb-color btn-rounded prevBtn-2 float-left btn-select" type="button">Previous</button>
			            <button class="btn btn-mdb-color btn-rounded nextBtn-2 float-right btn-select active" type="button" id="payButton">Pay</button>

						<script>
							var handler = StripeCheckout.configure({
  							key: 'pk_test_LwXiNZhYsOEbBUwAyaRD59Zm',
  							image: 'https://stripe.com/img/documentation/checkout/marketplace.png',
  							locale: 'auto',
  							token: function(token) {
    							// You can access the token ID with `token.id`.
    							// Get the token ID to your server-side code for use.
  							}
						});
							document.getElementById('payButton').addEventListener('click', function pay(e) {
								var email = document.getElementById('Email_Address').value;
								var id = $(this).attr('id');
								var price = 100;
								var overall = price * subTotal;
								console.log(subTotal);
								console.log(email);
	  						// Open Checkout with further options:
	  						handler.open({
	   						name: 'Pink Ribbon Event',
	    					description: 'Donation',
	    					amount: overall,
	    					email: email
	  						});
	  						e.preventDefault();
						});

							// Close Checkout on page navigation:
							window.addEventListener('popstate', function() {
  							handler.close();
						});
						</script>
			        </div>
			    </div>
			</form><!--Ends Form-->

		</div><!--Ends Donation-->

	</body>
</html>